<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="img/Logo Files/Favicons/browser.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="css/style.css">

    <title>Thrive Enterprise - Privacy Policy</title>
</head>

<body data-bs-spy="scroll" data-bs-target=".navbar" data-bs-offset="70">

    <!-- TOP NAV -->
    <div id="main-content">
        <div class="top-nav" id="top-nav-content">
            <!-- JS will inject contact info and social links here -->
        </div>

        <!-- BOTTOM NAV -->
        <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <img id="header-logo" src="img/Logo Files/png/Color logo - no background.png"
                        alt="Thrive Enterprise Logo" height="70">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul id="header-menu" class="navbar-nav ms-auto"></ul>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"
                        class="btn btn-brand ms-lg-3">Contact</a>
                </div>
            </div>
        </nav>

        <!-- SLIDER -->
        <div class="top-banner position-relative" style="background-color: #c58c62;">
            <div class="banner-text text-white text-center">
                <h1 class="banner-title" style="color: white">Privacy Policy</h1>
            </div>
        </div>

        <!-- PRIVACY POLICY SECTION -->
        <section id="privacy-policy" class="py-5 bg-light">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div id="privacy-content" class="policy-content">
                            <div class="text-center my-5">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mt-2">Loading privacy policy...</p>
                            </div>
                        </div>
                        <p class="fw-bold text-center mt-4" id="last-updated"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer>
            <div class="footer-top text-center">
                <div class="container">
                    <div class="row justify-content-center">
                        <a class="navbar-brand" href="#" id="footer-logo">
                            <img src="img/Logo Files/png/White logo - no background.png" alt="Thrive Enterprise Logo"
                                class="footer-logo">
                        </a>
                        <div class="col-lg-6 text-center">
                            <p id="footer-description">Contrary to popular belief, Lorem Ipsum is not simply random
                                text.</p>
                            <div class="col-auto social-icons" id="footer-social">
                                <a href="#"><i class='bx bxl-facebook'></i></a>
                                <a href="#"><i class='bx bxl-twitter'></i></a>
                                <a href="#"><i class='bx bxl-instagram'></i></a>
                                <a href="#"><i class='bx bxl-pinterest'></i></a>
                            </div>
                            <div class="col-auto conditions-section" id="footer-links">
                                <a href="privacy.html">Privacy</a>
                                <a href="terms.html">Terms</a>
                                <a href="disclaimer.html">Disclaimer</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom text-center">
                <p class="mb-0" id="copyright-text">Copyright Thrive Enterprise 2025. All rights Reserved</p>
                <span id="designer-text">Designed By <a href="https://reinsoft.site">ReinSoft IT Solutions</a></span>
            </div>
        </footer>

        <!-- MODAL -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content">
                    <div class="modal-body p-0">
                        <div class="container-fluid">
                            <div class="row gy-4">
                                <div class="col-lg-4 col-sm-12 bg-cover"
                                    style="background-image: url(img/c2.jpg); min-height:300px;"></div>
                                <div class="col-lg-8">
                                    <form class="p-lg-5 col-12 row g-3" id="contactForm">
                                        <div>
                                            <h1>Get in touch</h1>
                                            <p>Feel free to contact us and we will get back to you as soon as possible
                                            </p>
                                        </div>
                                        <div class="col-lg-6">
                                            <label class="form-label">First name</label>
                                            <input type="text" class="form-control" placeholder="Jon" required>
                                        </div>
                                        <div class="col-lg-6">
                                            <label class="form-label">Last name</label>
                                            <input type="text" class="form-control" placeholder="Doe" required>
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label">Email address</label>
                                            <input type="email" class="form-control" placeholder="Johndoe@example.com"
                                                required>
                                        </div>
                                        <div class="col-12">
                                            <label class="form-label">Enter Message</label>
                                            <textarea name="message" placeholder="This is looking great and nice."
                                                class="form-control" rows="4" required></textarea>
                                        </div>
                                        <div class="col-12">
                                            <button type="submit" class="btn btn-brand">Send Message</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>

    <script>
        const API_BASE_URL = 'https://thriveenterprisesolutions.com.au/admin/api';
        const HEADER_ENDPOINT = '/headers';
        const PRIVACY_POLICY_ENDPOINT = '/privacy-policies/active';
        const FOOTER_ENDPOINT = '/footers';
        const CONTACT_ENDPOINT = '/contact';

        // Helper function to get social media icon class
        function getSocialIcon(platform) {
            const iconMap = {
                'facebook': 'bxl-facebook',
                'twitter': 'bxl-twitter',
                'instagram': 'bxl-instagram',
                'pinterest': 'bxl-pinterest',
                'linkedin': 'bxl-linkedin',
                'youtube': 'bxl-youtube',
                'tiktok': 'bxl-tiktok',
                'whatsapp': 'bxl-whatsapp'
            };
            return iconMap[platform.toLowerCase()] || 'bx-link';
        }

        // Fetch Contact Info for Top Nav
        async function fetchContactInfo() {
            try {
                const response = await fetch(`${API_BASE_URL}${CONTACT_ENDPOINT}`);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const info = await response.json();

                let socialHtml = "";
                if (info.facebook) socialHtml += `<a href="${info.facebook}" target="_blank"><i class="bx bxl-facebook"></i></a>`;
                if (info.twitter) socialHtml += `<a href="${info.twitter}" target="_blank"><i class="bx bxl-twitter"></i></a>`;
                if (info.instagram) socialHtml += `<a href="${info.instagram}" target="_blank"><i class="bx bxl-instagram"></i></a>`;
                if (info.pinterest) socialHtml += `<a href="${info.pinterest}" target="_blank"><i class="bx bxl-pinterest"></i></a>`;
                if (info.linkedin) socialHtml += `<a href="${info.linkedin}" target="_blank"><i class="bx bxl-linkedin"></i></a>`;

                // Fallback if no social links
                if (!socialHtml) {
                    socialHtml = `
                        <a href="#"><i class="bx bxl-facebook"></i></a>
                        <a href="#"><i class="bx bxl-twitter"></i></a>
                        <a href="#"><i class="bx bxl-instagram"></i></a>
                        <a href="#"><i class="bx bxl-pinterest"></i></a>
                    `;
                }

                $("#top-nav-content").html(`
                    <div class="container">
                        <div class="row justify-content-between">
                            <div class="col-auto">
                                ${info.email ? `<p><i class="bx bxs-envelope"></i> ${info.email}</p>` : ''}
                                ${info.phone ? `<p><i class="bx bxs-phone-call"></i> ${info.phone}</p>` : ''}
                            </div>
                            <div class="col-auto social-icons">
                                ${socialHtml}
                            </div>
                        </div>
                    </div>
                `);
            } catch (error) {
                console.error("Error loading contact info:", error);
            }
        }

        // Fetch Header
        async function fetchHeader() {
            try {
                const response = await fetch(`${API_BASE_URL}${HEADER_ENDPOINT}`);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const headers = await response.json();

                if (headers.length > 0) {
                    const header = headers[0];

                    // Update logo
                    if (header.logo_path) {
                        $('#header-logo').attr('src', `${API_BASE_URL.replace('/api', '')}/storage/${header.logo_path}`)
                            .on("error", function () {
                                $(this).attr("src", "img/Logo Files/png/Color logo - no background.png");
                            });
                    }

                    // Decode menu_items if JSON string
                    let menuItems = [];
                    if (typeof header.menu_items === 'string') {
                        try {
                            menuItems = JSON.parse(header.menu_items);
                        } catch (e) {
                            console.error("Invalid menu_items JSON");
                        }
                    } else if (Array.isArray(header.menu_items)) {
                        menuItems = header.menu_items;
                    }

                    // Static hrefs (you can match them to menu items order)
                    const staticHrefs = [
                        '/index',
                        '/index#about',
                        '/index#services',
                        '/index#team',
                        '/index#contact'
                    ];

                    // Populate menu dynamically
                    const menuContainer = $('#header-menu');
                    menuContainer.empty();
                    menuItems.forEach((item, index) => {
                        const href = staticHrefs[index] || '#';
                        menuContainer.append(`<li class="nav-item"><a class="nav-link" href="${href}">${item}</a></li>`);
                    });
                }
            } catch (error) {
                console.error("Error loading header:", error);
            }
        }

        // Fetch Privacy Policy
        async function fetchPrivacyPolicy() {
            try {
                const response = await fetch(`${API_BASE_URL}${PRIVACY_POLICY_ENDPOINT}`);
                if (!response.ok) throw new Error('Failed to fetch privacy policy');
                const data = await response.json();
                if (data.success && data.data) {
                    displayPrivacyPolicy(data.data);
                } else {
                    throw new Error('No privacy policy data available');
                }
            } catch (error) {
                console.error('Error fetching privacy policy:', error);
                displayError();
            }
        }

        function displayPrivacyPolicy(policy) {
            const contentContainer = $('#privacy-content');
            const lastUpdatedElement = $('#last-updated');

            contentContainer.html(`
                <h2 class="text-center mb-4">${policy.title}</h2>
                <div class="policy-html-content">${policy.content}</div>
            `);

            const lastUpdated = new Date(policy.last_updated);
            lastUpdatedElement.text(`Last Updated: ${lastUpdated.toLocaleDateString('en-US', {
                year: 'numeric', month: 'long', day: 'numeric'
            })}`);
        }

        function displayError() {
            $('#privacy-content').html(`
                <div class="alert alert-danger">
                    <h4>Error Loading Privacy Policy</h4>
                    <p>We couldn't load our privacy policy at this time. Please try again later.</p>
                </div>
            `);
        }

        // Fetch Footer
        async function fetchFooter() {
            try {
                const response = await fetch(
                    "https://thriveenterprisesolutions.com.au/admin/api/footers"
                );
                if (!response.ok)
                    throw new Error(`HTTP error! status: ${response.status}`);
                const footers = await response.json();

                if (footers.length > 0) {
                    const footer = footers[0];

                    // Update footer description
                    if (footer.description) {
                        $("#footer-description").text(footer.description);
                    }

                    // Update copyright text
                    if (footer.copyright_text) {
                        $("#copyright-text").text(footer.copyright_text);
                    }

                    // Update designer text
                    if (footer.designer_text) {
                        $("#designer-text").html(footer.designer_text);
                    } else {
                        $("#designer-text").html(
                            'Designed By <a href="https://reinsoft.site">ReinSoft IT Solutions</a>'
                        );
                    }

                    // Update social links
                    const socialLinks = footer.social_links || {};
                    const socialIcons = $("#footer-social");
                    socialIcons.empty();

                    if (socialLinks.facebook) {
                        socialIcons.append(
                            `<a href="${socialLinks.facebook}" target="_blank"><i class='bx bxl-facebook'></i></a>`
                        );
                    }
                    if (socialLinks.twitter) {
                        socialIcons.append(
                            `<a href="${socialLinks.twitter}" target="_blank"><i class='bx bxl-twitter'></i></a>`
                        );
                    }
                    if (socialLinks.instagram) {
                        socialIcons.append(
                            `<a href="${socialLinks.instagram}" target="_blank"><i class='bx bxl-instagram'></i></a>`
                        );
                    }
                    if (socialLinks.linkedin) {
                        socialIcons.append(
                            `<a href="${socialLinks.linkedin}" target="_blank"><i class='bx bxl-linkedin'></i></a>`
                        );
                    }
                    if (Object.keys(socialLinks).length === 0) {
                        socialIcons.append(`
                            <a href="#"><i class='bx bxl-facebook'></i></a>
                            <a href="#"><i class='bx bxl-twitter'></i></a>
                            <a href="#"><i class='bx bxl-instagram'></i></a>
                            <a href="#"><i class='bx bxl-pinterest'></i></a>
                        `);
                    }

                    // Update footer links
                    const footerLinks = $("#footer-links");
                    footerLinks.empty();

                    if (footer.privacy_link) {
                        footerLinks.append(
                            `<a href="${footer.privacy_link}" target="_blank">Privacy</a>`
                        );
                    }
                    if (footer.terms_link) {
                        footerLinks.append(
                            `<a href="${footer.terms_link}" target="_blank">Terms</a>`
                        );
                    }
                    if (footer.disclaimer_link) {
                        footerLinks.append(
                            `<a href="${footer.disclaimer_link}" target="_blank">Disclaimer</a>`
                        );
                    }
                    if (
                        !footer.privacy_link &&
                        !footer.terms_link &&
                        !footer.disclaimer_link
                    ) {
                        footerLinks.append(`
                            <a href="#">Privacy</a>
                            <a href="#">Terms</a>
                            <a href="#">Disclaimer</a>
                        `);
                    }
                }
            } catch (error) {
                console.error("Error loading footer:", error);
            } finally {
                hideLoader();
            }
        }

        // Contact form submission
        $('#contactForm').on('submit', function (e) {
            e.preventDefault();
            const submitButton = $(this).find('button[type="submit"]');
            const originalText = submitButton.text();

            submitButton.prop('disabled', true);
            submitButton.html('<span class="spinner-border spinner-border-sm"></span> Sending...');

            // Simulate API call
            setTimeout(() => {
                alert('Thank you for your message! We will get back to you soon.');
                $('#contactForm')[0].reset();
                submitButton.prop('disabled', false);
                submitButton.text(originalText);
                $('#exampleModal').modal('hide');
            }, 1500);
        });

        // Initialize everything when DOM is ready
        $(document).ready(function () {
            fetchContactInfo();
            fetchHeader();
            fetchPrivacyPolicy();
            fetchFooter();
        });
    </script>
</body>

</html>